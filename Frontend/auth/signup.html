<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Sign Up - TripGenie</title>
  <link rel="stylesheet" href="styles/signup.css">
</head>

<body>
  <div class="container">
    <h2>Sign Up</h2>
    <div class="form-row">
      <div class="form-group half">
        <input type="text" id="signup-firstname" placeholder="First Name" required>
      </div>
      <div class="form-group half">
        <input type="text" id="signup-lastname" placeholder="Last Name" required>
      </div>
    </div>
    <div class="form-group">
      <input type="email" id="signup-email" placeholder="Email Address" required>
    </div>
    <div class="form-group">
      <input type="tel" id="signup-phone" placeholder="Phone Number" required>
    </div>
    <div class="form-group">
      <input type="text" id="signup-username" placeholder="Username" required>
    </div>
    <div class="form-group">
      <input type="password" id="signup-password" placeholder="Password" required>
    </div>
    <button onclick="signup()">Sign Up</button>

    <div class="link">
      Already have an account? <a href="signin.html">Sign In</a>
    </div>
  </div>

  <!-- Add Modal HTML -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <h3 class="modal-title" id="modal-title"></h3>
      <p class="modal-message" id="modal-message"></p>
      <button class="modal-button" onclick="closeModal()">OK</button>
    </div>
  </div>

  <script>
    function showModal(title, message, type = 'success') {
      const modal = document.getElementById('modal');
      const modalTitle = document.getElementById('modal-title');
      const modalMessage = document.getElementById('modal-message');

      modalTitle.textContent = title;
      modalMessage.textContent = message;
      modal.classList.add('show', type);
    }

    function closeModal() {
      const modal = document.getElementById('modal');
      modal.classList.remove('show', 'success', 'error');
      if (modal.dataset.redirect) {
        window.location.href = modal.dataset.redirect;
      }
    }

    function signup() {
      const firstname = document.getElementById('signup-firstname').value;
      const lastname = document.getElementById('signup-lastname').value;
      const email = document.getElementById('signup-email').value;
      const phone = document.getElementById('signup-phone').value;
      const username = document.getElementById('signup-username').value;
      const password = document.getElementById('signup-password').value;

      if (!firstname || !lastname || !email || !phone || !username || !password) {
        showModal('Error', 'Please fill in all fields', 'error');
        return;
      }

      if (localStorage.getItem(username)) {
        showModal('Error', 'Username already exists', 'error');
        return;
      }

      localStorage.setItem(username, JSON.stringify({ firstname, lastname, email, phone, password }));
      const modal = document.getElementById('modal');
      modal.dataset.redirect = 'signin.html';
      showModal('Success', 'Account created successfully! Redirecting to sign in...');
    }
  </script>
</body>

</html>